<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Estilos para el contenedor del formulario */
        #article-form {
            display: none; /* Ocultar por defecto */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 1px solid #ccc;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        #overlay {
            display: none; /* Ocultar por defecto */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 500;
        }
    </style>
</head>
<body>
    <h1>Blog</h1>
    <button id="add-article-btn">Añadir Artículo</button>

    <div id="article-list"></div>

    <div id="overlay"></div>
    <div id="article-form">
        <h2>Nuevo Artículo</h2>
        <input type="text" id="article-title" placeholder="Título" required>
        <textarea id="article-content" placeholder="Contenido" required></textarea>
        <button id="save-article-btn">Guardar Artículo</button>
        <button id="close-form-btn">Cerrar</button>
    </div>

    <script>
// Configuración de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC3yOWMkj_-y4ESMaDr-EEmXvY5Kvpm9nY",
            authDomain: "blog-b9f88.firebaseapp.com",
            projectId: "blog-b9f88",
            storageBucket: "blog-b9f88.appspot.com",
            messagingSenderId: "961397712722",
            appId: "1:961397712722:web:d3427481220befc9463c8b",
            measurementId: "G-EKVXR4Q12M"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Mostrar el formulario al hacer clic en el botón
        document.getElementById('add-article-btn').addEventListener('click', () => {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('article-form').style.display = 'block';
        });

        // Cerrar el formulario
        document.getElementById('close-form-btn').addEventListener('click', () => {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('article-form').style.display = 'none';
        });

        // Guardar el artículo en Firestore
        document.getElementById('save-article-btn').addEventListener('click', () => {
            const title = document.getElementById('article-title').value;
            const content = document.getElementById('article-content').value;

            if (title && content) {
                db.collection('articles').add({
                    title: title,
                    content: content
                }).then(() => {
                    // Limpiar los campos
                    document.getElementById('article-title').value = '';
                    document.getElementById('article-content').value = '';
                    // Ocultar el formulario
                    document.getElementById('overlay').style.display = 'none';
                    document.getElementById('article-form').style.display = 'none';
                }).catch((error) => {
                    console.error("Error al guardar el artículo: ", error);
                });
            } else {
                alert("Por favor, completa todos los campos.");
            }
        });

        // Recuperar artículos guardados de Firestore y mostrarlos en la página
        db.collection('articles').onSnapshot((snapshot) => {
            const articleList = document.getElementById('article-list');
            articleList.innerHTML = ''; // Limpiar la lista de artículos
            snapshot.forEach((doc) => {
                const data = doc.data();
                const article = document.createElement('div');
                article.classList.add('article');
                article.innerHTML = `
                    <input type="text" class="article-title" value="${data.title}" readonly />
                    <textarea class="article-content" readonly>${data.content}</textarea>
                `;
                articleList.appendChild(article);
            });
        });
    </script>
</body>
</html>
